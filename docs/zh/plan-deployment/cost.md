!!! Important "重要"

    本节中描述的成本估算只是用于参考的示例，实际产生费用会因您的使用场景不同而有较大差异。


在运行此解决方案时，您需要承担亚马逊云科技各项服务的使用费用，以下示例为截至最新发布的版本，基于亚马逊云科技美国东部（弗吉尼亚北部）区域 (us-east-1)和由西云数据运营的亚马逊云科技中国（宁夏）区域(cn-northwest-1)的成本估算。 总成本包括[**敏感数据检测的费用**](#_1)和[**Web界面控制台费用**](#web)。

## 敏感数据检测的费用

此方案主要的费用来源于敏感数据检测任务，实际产生的费用是由检测任务运行的时长决定的，不同的检测任务运行的时间长短也不尽相同，运行时间较长的检测任务通常会比运行时间短的检测任务产生更多的费用。影响到检测任务运行时长的三个主要因素包括

* 用于检测敏感信息的标识符的多少

    方案是通过预定义的检测标识符来检测敏感信息的，在检测数据之前需要选择好所需的检测标识符，加载的标识符越多，进行敏感信息检测的时间就会越久，检测任务运行的总时间也会变长，支出的费用也就越多。

* 连接的数据源类型

    受不同数据源吞吐量或网络带宽影响，敏感信息检测任务在检测不同的数据源时的效率是不同的。比如敏感信息检测任务会受RDS数据库网络带宽的影响，更高性能的RDS数据源往往会使敏感信息检测任务结束的更快。

* 数据量和数据的内容

    显而易见，检测任务在数据量大的时候往往需要更长的时间。除了数据源中的数据量之外，数据的格式，还有检测任务中的取样量和检测深度也会影响到检测任务的时长。


以下列出的两个场景，以AWS服务按月计费的方式展示了成本估算，示例分别包含美国东部弗吉尼亚区域(us-east-1)和由西云数据运营的亚马逊云科技中国（宁夏）区域(cn-northwest-1)的成本估算。以下示例均为默认配置下，单次检测任务产生的成本，如果指定了定期自动执行检测任务，在数据量基本不改变的情况下，生产的成本会按每个月实际执行次数叠加。

* 美国东部弗吉尼亚区域(us-east-1)

|场景|检测数据目录费用（美元）|检测数据费用（美元）|费用（美元）|
|:----|:----|:----|:----|
|<li>S3 Bucket 1: 总大小1.7Gb，包含10000个CSV文件</li><li>S3 Bucket 2: 总大小2.5Gb，包含10000个PDF文件</li><li>S3 Bucket 3: 总大小2Gb，包含10000个PNG图片文件</li>|1.01|2.32|3.32|
|<li>RDS Aurora MySQL 实例类型：db.r5.large: 10个表，10000行，10列</li><li>RDS MySQL Community 实例类型：db.m5.12xlarge: 10个表，1000000行，10列</li>|2.52|2.8|5.34|
|<li>S3 Bucket A: 10000 CSV文件，1000行，10列，总大小1.7GiB</li><li>S3 Bucket B: 10000 JSON文件，1000行，10个字段，总大小2.5GiB</li><li>S3 Bucket C: 1000 PARQUET文件，1000行，10个字段，总大小212Mb</li><li>RDS Aurora MySQL A: 10个表，10000行，10列，实例类型：db.r5.large（8vCPUs，64GiB RAM，网络：4,750 Mbps）|15.61|71|86.61|



* 由西云数据运营的亚马逊云科技中国（宁夏）区域(cn-northwest-1)

|场景|检测数据目录费用（元）|检测数据费用（元）|费用（元）|
|:----|:----|:----|:----|
|<li>S3 Bucket 1: 总大小1.7Gb，包含10000个CSV文件</li><li>S3 Bucket 2: 总大小2.5Gb，包含10000个PDF文件</li><li>S3 Bucket 3: 总大小2Gb，包含10000个PNG图片文件</li>|1.01|2.32|3.32|
|<li>RDS Aurora MySQL 实例类型：db.r5.large: 10个表，10000行，10列</li><li>RDS MySQL Community 实例类型：db.m5.12xlarge: 10个表，1000000行，10列</li>|2.52|2.8|5.34|
|<li>S3 Bucket A: 10000 CSV文件，1000行，10列，总大小1.7GiB</li><li>S3 Bucket B: 10000 JSON文件，1000行，10个字段，总大小2.5GiB</li><li>S3 Bucket C: 1000 PARQUET文件，1000行，10个字段，总大小212Mb</li><li>RDS Aurora MySQL A: 10个表，10000行，10列，实例类型：db.r5.large（8vCPUs，64GiB RAM，网络：4,750 Mbps）|15.61|71|86.61|


## WEB界面控制台的费用

部署解决方案时会自动创建一个通过浏览器访问的Web界面控制台。截至最新发布的版本，使用默认设置并且假设访问次数为1000次，则将产生以下费用

* 美国东部（弗吉尼亚北部）区域(us-east-1)运行一个月（按30天计算）

| **服务**                                                         | **使用量**            | **月费用（美元）** |
| --------------------------------------------------------------- | --------------------- | --------------- |
| Amazon Relational Database Service for MySQL Community Edition | 720小时              | 97.92           |
| Amazon Relational Database Service Provisioned Storage         | 20 GB-月            | 4.6             |
| Amazon Elastic Compute Cloud NatGateway                        | 30 GB-月            | 1.35            |
|                                                                | 720小时              | 32.4            |
| Athena                                                         | 0.010 TB           | 0.05            |
| CloudWatch                                                     | 0.100 GB-月         | 0.05            |
| Elastic Load Balancing - Application                           | 10小时               | 0               |
|                                                                | 0.105 LCU小时        | 0               |
| Lambda                                                         | 5,0000 Lambda-GB-秒 | 0.08333         |
|                                                                | 10,000次请求          | 0               |
| Simple Queue Service (SQS)                                          | 100,000次请求         | 0.04            |
| Simple Storage Service (S3)                                        | 2,000次请求           | 0.01            |
|                                                                | 4,000次请求           | 0.0002          |
|                                                                | 1 GB               | 0.023           |
| **总计**                                                       |                        | 136.53          |

* 由西云数据运营的亚马逊云科技中国（宁夏）区域(cn-northwest-1)运行一个月（按30天计算）

| **服务**                                                         | **使用量**                     | **每月费用（元）** |
| ------------------------------------------------------------------ | -------------------------------- | --------------- |
| Amazon Relational Database Service for MySQL Community Edition | 720小时                        | 576             |
| Amazon Relational Database Service Provisioned Storage         | 20 GB-Mo                     | 30.62           |
| Amazon Elastic Compute Cloud NatGateway                        | 30 GB-Mo                     | 11.1            |
|                                                                    | 720小时                        | 266.4           |
| Athena                                                         | 0.010 TB                     | 0.34            |
| CloudWatch                                                     | 0.100 GB-Mo                  | 0.24            |
| EC2 Container Registry (ECR)                                   | 0.003 GB-Mo                  | 0.69            |
| Elastic Load Balancing - Application                           | 10小时                         | 1.56            |
|                                                                    | 0.105 LCU-Hrs                | 0               |
| Lambda                                                         | 100,000.000 Lambda-GB-Second | 11.35           |
|                                                                    | 10,000请求                     | 0               |
| Simple Queue Service                                           | 100,000请求                    | 3.33            |
| Simple Storage Service                                         | 2,000请求                      | 0.01            |
|                                                                    | 4,000请求                      | 0.01            |
|                                                                    | 0.032 GB-Mo                  | 0.176           |
| **总计**                                                         |                                  | 901.82          |

## 成本优化的建议

检测任务执行的基本费用为按需计费，这意味着您只需为实际使用的资源付费，而不必提前购买或预留任何容量，此外，AWS还提供了一些免费的使用额度，以帮助您了解和评估服务的使用情况。

* 在执行敏感信息检测任务前，认真检测选择合适的敏感信息的标识符而不是全选
    通常，检测标识符过多意味着需要更多的时间完成敏感信息检测，请在执行检测任务前通过检测模版的添加/删除敏感信息的标识符功能，调整相应的标识符，从而降低检测任务的执行时间。

* 根据实际数据量，设置适度的检测深度与样本量，即可准确检测敏感信息
    在数据量较大，并以结构化信息为主的检测场景下，如RDS数据库，可以选择较小的样本量即可检测到敏感信息，从而达到优化成本的目的。

* 根据实际情况调整定时检测任务的执行频率
    检测任务执行频次会对成本产生较大影响，如果数据变化不大，可以在创建敏感信息检测任务是选择按需扫描而不是设置定时扫描，从而减少任务执行频次。


我们建议使用解决方案中的[AWS Cost Explorer](http://aws.amazon.com/aws-cost-management/aws-cost-explorer/)功能来帮助管理成本。价格可能会有所变化。有关详细信息，请参阅本解决方案中使用的每个AWS服务的定价网页。
